<!DOCTYPE html>
<html>
<head>
    <title>Seed Firestore Data</title>
</head>
<body>
    <h1>Seeding Firestore Data...</h1>
    <div id="status">Loading...</div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, setDoc, doc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyBvOkBH0ImFzjFhd09YoKJH6Uf-c_QMy-g",
            authDomain: "service-booking-9d8cb.firebaseapp.com",
            projectId: "service-booking-9d8cb",
            storageBucket: "service-booking-9d8cb.firebasestorage.app",
            messagingSenderId: "1008998558571",
            appId: "1:1008998558571:web:7c8f4c4b8f4c4b8f4c4b8f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function seedData() {
            try {
                const status = document.getElementById('status');
                
                // Add branches
                status.innerHTML = 'Adding branches...';
                const branch1 = await addDoc(collection(db, 'branches'), {
                    name: 'Downtown Salon',
                    address: '123 Main Street, Downtown, NY 10001',
                    phone: '+1 (555) 123-4567',
                    email: 'downtown@bookeasy.com',
                    status: 'online'
                });

                const branch2 = await addDoc(collection(db, 'branches'), {
                    name: 'Uptown Beauty',
                    address: '456 Park Avenue, Uptown, NY 10002',
                    phone: '+1 (555) 234-5678',
                    email: 'uptown@bookeasy.com',
                    status: 'online'
                });

                // Add services
                status.innerHTML = 'Adding services...';
                const service1 = await addDoc(collection(db, 'services'), {
                    name: 'Haircut & Style',
                    description: 'Professional haircut and styling service',
                    duration: 60,
                    price: 45,
                    image: 'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400',
                    branches: [branch1.id, branch2.id],
                    staffIds: []
                });

                const service2 = await addDoc(collection(db, 'services'), {
                    name: 'Hair Color',
                    description: 'Professional hair coloring service',
                    duration: 120,
                    price: 85,
                    image: 'https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=400',
                    branches: [branch1.id, branch2.id],
                    staffIds: []
                });

                const service3 = await addDoc(collection(db, 'services'), {
                    name: 'Manicure',
                    description: 'Professional nail care and manicure',
                    duration: 45,
                    price: 35,
                    image: 'https://images.unsplash.com/photo-1604654894610-df63bc536371?w=400',
                    branches: [branch1.id, branch2.id],
                    staffIds: []
                });

                // Add staff
                status.innerHTML = 'Adding staff...';
                const staff1 = await addDoc(collection(db, 'staff'), {
                    name: 'Sarah Johnson',
                    email: 'sarah@bookeasy.com',
                    phone: '+1 (555) 234-5678',
                    specialization: 'Hair Styling & Color',
                    photo: 'https://images.unsplash.com/photo-1594824804732-ca8db7d1457e?w=400',
                    services: [service1.id, service2.id]
                });

                const staff2 = await addDoc(collection(db, 'staff'), {
                    name: 'Emily Davis',
                    email: 'emily@bookeasy.com',
                    phone: '+1 (555) 345-6789',
                    specialization: 'Nail Care Specialist',
                    photo: 'https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=400',
                    services: [service3.id]
                });

                const staff3 = await addDoc(collection(db, 'staff'), {
                    name: 'Michael Brown',
                    email: 'michael@bookeasy.com',
                    phone: '+1 (555) 456-7890',
                    specialization: 'Hair Styling',
                    photo: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400',
                    services: [service1.id]
                });

                // Update services with staff IDs
                status.innerHTML = 'Updating service relationships...';
                await setDoc(doc(db, 'services', service1.id), {
                    name: 'Haircut & Style',
                    description: 'Professional haircut and styling service',
                    duration: 60,
                    price: 45,
                    image: 'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400',
                    branches: [branch1.id, branch2.id],
                    staffIds: [staff1.id, staff3.id]
                });

                await setDoc(doc(db, 'services', service2.id), {
                    name: 'Hair Color',
                    description: 'Professional hair coloring service',
                    duration: 120,
                    price: 85,
                    image: 'https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=400',
                    branches: [branch1.id, branch2.id],
                    staffIds: [staff1.id]
                });

                await setDoc(doc(db, 'services', service3.id), {
                    name: 'Manicure',
                    description: 'Professional nail care and manicure',
                    duration: 45,
                    price: 35,
                    image: 'https://images.unsplash.com/photo-1604654894610-df63bc536371?w=400',
                    branches: [branch1.id, branch2.id],
                    staffIds: [staff2.id]
                });

                status.innerHTML = `
                    <h2 style="color: green;">✅ Data seeded successfully!</h2>
                    <p>Added:</p>
                    <ul>
                        <li>2 Branches</li>
                        <li>3 Services</li>
                        <li>3 Staff members</li>
                    </ul>
                    <p>You can now close this page and test the booking flow.</p>
                `;

            } catch (error) {
                document.getElementById('status').innerHTML = `<h2 style="color: red;">❌ Error: ${error.message}</h2>`;
                console.error('Error seeding data:', error);
            }
        }

        seedData();
    </script>
</body>
</html>